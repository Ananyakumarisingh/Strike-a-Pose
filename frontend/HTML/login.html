<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign In</title>
   <link rel="stylesheet" href="../styles/login.css">
    <link rel="stylesheet" href="../styles/navbar-footer.css" />
   

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" />
    
  </head>
  <body>
  <!------------------- navigation bar start ------------>

  <div class="nav">
    <div  class="part1">
             <img width="100%" src="https://i.postimg.cc/KvWzQQz2/Whats-App-Image-2023-03-28-at-2-23-14-PM.jpg" alt="logo">
        <img  width="100%"  src="https://i.postimg.cc/cHrqvmyc/Stike.png" alt="">
        <div>
             <a  id="nbtn" href="../index.html">Home</a>
            <a  id="nbtn" href="./allPhotographer.html">Dashboard</a>
        </div>
       
    </div>
    
   <div class="part2">
        <a id="nbtn" href="./login.html">Login</a>
        <a id="nbtn"  href="./userSignup.html">Signup</a>
        <button class="nav-button">Register as Studio</button>
    </div>
</div>

 <!------------------- page contain  ------------>
    <div class="container">
      <img
        class="logo"
        width="8%"
        src="https://i.postimg.cc/KvWzQQz2/Whats-App-Image-2023-03-28-at-2-23-14-PM.jpg"
        alt=""
      />

      <div class="part">
        <div>
          <span class="head"> Sign In</span>
          <span class="body">
            <a href="userSignup.html"> Create Account </a>instead?</span>
        </div>
        <form action="">
             <p>Phone Number</p>
            <input id="mobile" type="text" required />

            <p>Password</p>
            <input id="password" type="password" required />

            <p>Login As</p>
            <select name="role" id="role">
              <option value="users">User</option>
              <option value="studios">Studio</option>
        
            </select>
          <div class="lastline">
          <p class="body">Stay signed in for 30 days</p>
          <a href="">forgot password?</a>
        </div>

        <input type="submit" class="btn" value="Sign in"></input>

        </form>
        
     
     
      </div>
    </div>

    
    <!------------------- footer part  ------------>
    <div class="footer">
        <p id="ftext">Strike a Pose </p>
        <div>
            <div>
                <p>Company</p>
                <li>Blog
                </li>
                <li>About Us
                </li>
                <li>Contact Us</li>
                <li>Cities</li>
                
            </div>
            <div>
                <p>Legal</p>
                <li>Terms Of Service
                </li>
                <li>Privacy Policy
                </li>
                <li>Content Guidelines</li>
                <li>Community Guidelines</li>
                <li>3rd Party licenses</li>
                
            </div>
        </div>
        <hr>
        <p>
            Icons made by Freepik from www.flaticon.com And Font Awesome
            </p>
            <hr>
            <p>
                Â© Copyright 2023 Strike a Pose Technologies Pvt. Ltd. All rights reserved. | 
                Terms Of Service | 
                Privacy Policy
                </p>
    </div>


  </body>
</html>

<script>

//-----nav------


//-----nav------


  document.querySelector("form").addEventListener("submit", login);

async function login(event) {
  event.preventDefault();
  try {
    let mobile = document.querySelector("#mobile").value;
    let password = document.querySelector("#password").value;
    let role=document.querySelector("#role").value;
  
    let logdata = {
      mobile,
      password,
    };

    console.log(role)

    
      let logurl = `https://erin-shiny-lizard.cyclic.app/${role}/login`;

    let res = await fetch(logurl, {
      method: "POST",
      body: JSON.stringify(logdata),
      headers: {
        "Content-type": "application/json",
      },
    });
    let data = await res.json();
    if (data.token) {
      // Store the access token in the session storage
      localStorage.setItem('token', data.token);
      alert(data.message);
      window.location = "../index.html";
    } else {
      alert(data.message);
    }
   
  } catch (err) {
    console.log("err", err);
    alert(data.message);
  }
}
</script>